const Ranking=function(){"use strict";function e(e,r={}){const{sortBy:s="overall",order:t="desc",limit:i=10,filters:c={},includeReasons:n=!1}=r;let a="undefined"!=typeof Catalog?Catalog.filterProducts(e,c):Object.values(e.products).filter(e=>"active"===e.status);return a=a.map(e=>({product:e,score:o(e,s),sortField:s})),a.sort((e,o)=>null===e.score&&null===o.score?0:null===e.score?1:null===o.score?-1:"desc"===t?o.score-e.score:e.score-o.score),a=a.slice(0,i),a.map((o,r)=>{const t={rank:r+1,product:o.product,score:o.score,sortField:o.sortField};return n&&(t.reasons=function(e,o,r,s){const t=[];if(0===r)switch(o){case"overall":t.push(`Melhor nota geral: ${e.editorialScores.overall}/10`);break;case"price":t.push(`Menor preÃ§o: ${i=e.bestPrice,null==i?"N/A":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i)}`);break;case"capacity":t.push(`Maior capacidade: ${e.specs.capacidade_total}L`);break;case"custo_beneficio":t.push(`Melhor custo-benefÃ­cio: ${e.editorialScores.custo_beneficio}/10`);break;case"consumo":t.push(`Menor consumo: ${e.specs.consumo_kwh} kWh/mÃªs`)}var i;const c=function(e,o){const r=[],s=e.editorialScores;return Object.entries(s).filter(([e,o])=>"overall"!==e&&"notes"!==e&&"updatedAt"!==e&&"number"==typeof o).sort((e,o)=>o[1]-e[1]).slice(0,2).forEach(([e,s])=>{if(s>=8.5){const t=o.scoringTopics.find(o=>o.id===e)?.label||e;r.push(`Destaque em ${t.toLowerCase()}: ${s}/10`)}}),r}(e,s);return c.slice(0,2).forEach(e=>t.push(e)),t}(o.product,s,r,e)),t})}function o(e,o,r){switch(o){case"overall":return e.editorialScores?.overall??null;case"price":return e.bestPrice??null;case"capacity":return e.specs?.capacidade_total??null;case"freezer":return e.specs?.capacidade_freezer??null;case"consumption":const r=e.specs?.consumo_kwh;return r?100-r:null;case"reviews":return e.avgRating??null;case"width":const s=e.specs?.largura_cm;return s?100-s:null;default:return e.editorialScores?.[o]??null}}const r={geladeira:[{id:"top10",title:"Top 10 Geladeiras",description:"Melhores geladeiras por nota geral",icon:"ðŸ†",options:{sortBy:"overall",limit:10,includeReasons:!0}},{id:"best_value",title:"Melhor Custo-BenefÃ­cio",description:"Geladeiras com melhor relaÃ§Ã£o preÃ§o/qualidade",icon:"ðŸ’°",options:{sortBy:"custo_beneficio",limit:5,includeReasons:!0}},{id:"most_efficient",title:"Mais EconÃ´micas",description:"Menor consumo de energia",icon:"âš¡",options:{sortBy:"consumo",limit:5,includeReasons:!0}},{id:"largest_freezer",title:"Maior Freezer",description:"Para quem congela muito",icon:"ðŸ§Š",options:{sortBy:"freezer",limit:5,includeReasons:!0}},{id:"most_compact",title:"Mais Compactas",description:"Para nichos estreitos",icon:"ðŸ“",options:{sortBy:"width",limit:5,includeReasons:!0}},{id:"lowest_price",title:"Menores PreÃ§os",description:"OpÃ§Ãµes mais acessÃ­veis",icon:"ðŸ·ï¸",options:{sortBy:"price",order:"asc",limit:5,includeReasons:!0}}]};return{generate:e,generateMultiple:function(o,r){const s={};return r.forEach(r=>{s[r.id]={title:r.title,description:r.description,icon:r.icon,products:e(o,r.options)}}),s},getPresets:function(e){return r[e]||r.geladeira},getScore:o}}();"undefined"!=typeof module&&module.exports&&(module.exports=Ranking);